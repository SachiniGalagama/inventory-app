<div class="filters">
  <label>
    Filter by category:
    <select [(ngModel)]="categoryFilter" (change)="applyFilter()">
      <option value="">All</option>
      <option *ngFor="let cat of uniqueCategories" [value]="cat">
        {{ cat }}
      </option>
    </select>
  </label>

  <label>
    Sort by:
    <select [(ngModel)]="sortBy" (change)="applyFilter()">
      <option value="daysLeft">Days Left</option>
      <option value="name">Name</option>
    </select>
  </label>
</div>

<table class="forecast-table">
  <thead>
    <tr>
      <th>Item Name</th>
      <th>Category</th>
      <th>Stock</th>
      <th>Avg Daily Consumption</th>
      <th>Days Left</th>
      <th>Risk Level</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of filtered" [ngClass]="item.risk.toLowerCase()">
      <td>{{ item.name }}</td>
      <td>{{ item.category }}</td>
      <td>{{ item.stock }}</td>
      <td>{{ item.avgDailyConsumption | number: "1.1-1" }}</td>
      <td>{{ item.estimatedDaysLeft ?? "Unknown" }}</td>
      <td>{{ item.risk }}</td>
    </tr>
  </tbody>
</table>
